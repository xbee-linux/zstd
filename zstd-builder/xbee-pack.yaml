schema-version: 1.0

type: builder


const:
  srcDir: /usr/src
  exportDir: /opt/zstd


var:
  version: 1.5.0

dependency:
  origin: https://github.com/xbee-linux/file.git

provision:
  - url:
      from: https://github.com/facebook/zstd/releases/download/v{% version %}/zstd-{% version %}.tar.gz
      todir: "{% srcDir %}"

build:
  - shell:
      cmds:
        - make
#        - make check
        - make prefix={% exportDir %} install
        - rm -v {% exportDir %}/lib/libzstd.a
      directory: "{% srcDir %}/zstd-{% version %}"
  - export: "{% exportDir %}"

